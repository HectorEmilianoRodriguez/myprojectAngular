<div class="layout-topbar" style="display: flex; justify-content: space-between; align-items: center;">
    <!-- Esta es la parte del logo y la hamburguesa -->
    <div style="flex: 1; display: flex; align-items: center;">
        <a class="layout-topbar-logo" routerLink="">
            <img src="assets/demo/images/login/logoUpemor.png" alt="logo">
            <span>UpeFlexControl</span>
        </a>

<div class="layout-topbar" style="display: flex; justify-content: space-between; align-items: center;">
    <!-- Esta es la parte del logo y la hamburguesa -->
    <div style="flex: 1; display: flex; align-items: center;">
        <a class="layout-topbar-logo" routerLink="">
            <img src="assets/demo/images/login/logoUpemor.png" alt="logo">
            <span>UpeFlexControl</span>
        </a>

<div class="layout-topbar" style="display: flex; justify-content: space-between; align-items: center;">
    <!-- Esta es la parte del logo y la hamburguesa -->
    <div style="flex: 1; display: flex; align-items: center;">
        <a class="layout-topbar-logo" routerLink="">
            <img src="assets/demo/images/login/logoUpemor.png" alt="logo">
            <span>UpeFlexControl</span>
        </a>

        <button #menubutton class="p-link layout-menu-button layout-topbar-button" style="margin-left: 0vw;"
            (click)="layoutService.onMenuToggle()">
            <i class="pi pi-bars"></i>
        </button>
    </div>

    <!-- Parte de las opciones de usuario y notificaciones -->
    <div class="topbar-profile" style="display: flex; align-items: center; margin-left: auto;">
        <!-- Botón de notificaciones -->
        <div style="margin-right: 20px; position: relative;">
            <p-button icon="pi pi-bell" [rounded]="true" [text]="true" severity="warning" (click)="toggleNotificaciones()"></p-button>
            
            <!-- Contenedor de Notificaciones -->
            <div *ngIf="mostrarNotificaciones" class="notificaciones-dropdown p-shadow-2" style="position: absolute; top: 100%; right: 0; background: #f0f0f0; border-radius: 5px; padding: 0; z-index: 1000; width: 400px; border: 1px solid #ccc;">
                <h4 class="p-m-0 p-p-2" style="border-bottom: 1px solid #ccc; font-size: 16px; background-color: #e0e0e0;">Notificaciones</h4>
                <ul style="list-style: none; padding: 0; margin: 0;">
                    <li *ngFor="let notificacion of notificaciones" class="p-d-flex p-ai-start p-p-3" style="background: white; border-radius: 5px; margin: 10px; padding: 10px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);">
                        <div class="p-col" style="flex: 1;">
                            <strong style="font-size: 14px; color: #333;">{{ notificacion.title }}</strong><br>
                            <span style="font-size: 12px; color: #555;">{{ notificacion.description }}</span><br>
                            <small style="font-size: 10px; color: #999;">{{ notificacion.created_at | date:'short' }}</small>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <button type="button" class="p-element topbar-profile-button p-link" (click)="toggleOpciones()"
            style="display: flex; align-items: center; background: none; border: none; cursor: pointer;">
            <div style="width: 32px; height: 32px; border-radius: 50%; overflow: hidden; margin-right: 8px; display: flex; justify-content: center; align-items: center; background-color: #f0f0f0;">
                <ng-container *ngIf="!isLoadingPhoto; else loadingTemplate">
                    <img [src]="fotoUser" alt="Foto de perfil" 
                         style="max-width: 100%; max-height: 100%; object-fit: contain;">
                </ng-container>
                <ng-template #loadingTemplate>
                    <p-progressSpinner [style]="{width: '20px', height: '20px'}"></p-progressSpinner>
                </ng-template>
            </div>
            <span class="profile-name" style="margin-right: 8px;">{{ nombreUsuario }}</span>
            <i class="pi pi-angle-down"></i>
        </button>
        <ul *ngIf="opcionesDesplegadas" class="p-menu p-component" style="position: absolute; top: calc(100% + 5px); right: 0;">
            <a pripple class="p-ripple p-element flex p-2 border-round align-items-center
            hover:surface-hover transition-colors transition-duration-150 cursor-pointer" (click)="editPerfil()">
                <i class="pi pi-user mr-3" style="color: black;"></i>
                <span style="color: black;">Perfil</span>
            </a>

            <a pripple class="p-ripple p-element flex p-2 border-round align-items-center
            hover:surface-hover transition-colors transition-duration-150 cursor-pointer" (click)="editContrasena()">
                <i class="pi pi-key mr-3" style="color: black;"></i>
                <span style="color: black;">Contraseña</span>
            </a>

            <a pripple class="p-ripple p-element flex p-2 border-round align-items-center
            hover:surface-hover transition-colors transition-duration-150 cursor-pointer" (click)="salir()">
                <i class="pi pi-sign-in mr-3" style="color: black;"></i>
                <span style="color: black;">Salir</span>
            </a>
        </ul>
    </div>
</div>