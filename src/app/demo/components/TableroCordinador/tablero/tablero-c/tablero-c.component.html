<div class="grid">
	<div class="col-12">
	  <div class="card">
		<h5>Grupos de Actividades</h5>
		<p-toast></p-toast>
		<button pButton label="Crear Nuevo Grupo" icon="pi pi-plus" (click)="displayModal = true"></button>
		<p-table [value]="taskGroups" dataKey="id" rowGroupMode="subheader" [groupRowsBy]="['name']" responsiveLayout="scroll">
		  <ng-template pTemplate="header">
			<tr>
			  <th>Nombre del Grupo</th>
			  <th>Descripci贸n</th>
			  <th>Fecha de Inicio</th>
			  <th>Fecha de Fin</th>
			  <th>Acciones</th>
			</tr>
		  </ng-template>
		  <ng-template pTemplate="body" let-group let-rowIndex="rowIndex">
			<tr>
			  <td>{{ group.name }}</td>
			  <td>{{ group.description }}</td>
			  <td>{{ group.startDate | date }}</td>
			  <td>{{ group.endDate | date }}</td>
			  <td>
				<button (click)="expandedRows[group.name] = !expandedRows[group.name]">
					{{ expandedRows[group.name] ? 'Ocultar Actividades' : 'Mostrar Actividades' }}
				</button>
			  </td>
			</tr>
			<tr *ngIf="expandedRows[group.name]">
			  <td colspan="5">
				<div>
				  <h6>Actividades</h6>
				  <ul>
					<li *ngFor="let activity of group.activities">{{ activity.name }}</li>
				  </ul>
				  <h6>Agregar Actividad</h6>
				  <input [(ngModel)]="newActivity.nameT" placeholder="Nombre de la Actividad" />
				  <input [(ngModel)]="newActivity.descriptionT" placeholder="Descripci贸n de la Actividad" />
				  <input [(ngModel)]="newActivity.end_date" type="date" placeholder="Fecha de Fin" />
				  <input [(ngModel)]="newActivity.important" type="number" placeholder="Importante (0 o 1)" />
				  <button pButton label="Agregar" (click)="addActivity(group.id)"></button>
				</div>
			  </td>
			</tr>
		  </ng-template>
		</p-table>

		<!-- Modal para crear nuevo grupo -->
		<p-dialog header="Crear Nuevo Grupo" [(visible)]="displayModal" [modal]="true" [closable]="false">
		  <div>
			<label for="groupName">Nombre del Grupo:</label>
			<input id="groupName" [(ngModel)]="newGroup.name" placeholder="Nombre del Grupo" />
			<label for="groupDescription">Descripci贸n:</label>
			<input id="groupDescription" [(ngModel)]="newGroup.description" placeholder="Descripci贸n" />
			<label for="startDate">Fecha de Inicio:</label>
			<input id="startDate" type="date" [(ngModel)]="newGroup.startdate" />
			<label for="endDate">Fecha de Fin:</label>
			<input id="endDate" type="date" [(ngModel)]="newGroup.enddate" />
		  </div>
		  <p-footer>
			<button pButton label="Cancelar" icon="pi pi-times" (click)="displayModal = false"></button>
			<button pButton label="Crear" icon="pi pi-check" (click)="createGroup()"></button>
		  </p-footer>
		</p-dialog>
	  </div>
	</div>
  </div>
