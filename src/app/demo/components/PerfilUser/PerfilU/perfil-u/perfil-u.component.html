<div class="card mb-3">
    <h5>Perfil de Usuario</h5>
    <div class="p-fluid">
        <form [formGroup]="perfilForm" (ngSubmit)="onSubmit()">
            <div class="field">
                <label for="name">Nombre</label>
                <input id="name" type="text" pInputText formControlName="name"> 
                <small *ngIf="perfilForm.get('name')?.invalid && perfilForm.get('name')?.touched" class="p-error">Nombre es requerido</small>
            </div>
            <div class="field">
                <label for="email">Correo Electrónico</label>
                <input id="email" type="email" pInputText formControlName="email"> 
                <small *ngIf="perfilForm.get('email')?.invalid && perfilForm.get('email')?.touched" class="p-error">Correo electrónico inválido</small>
            </div>
            <div class="field">
                <label for="password">Contraseña (dejar en blanco si no desea cambiarla)</label>
                <input id="password" type="password" pInputText formControlName="password"> 
                <small *ngIf="perfilForm.get('password')?.invalid && perfilForm.get('password')?.touched" class="p-error">La contraseña debe tener al menos 6 caracteres</small>
            </div>
            <div class="field">
                <label>Foto de Perfil</label>
                <img [src]="fotoUser" alt="Foto de perfil" style="max-width: 200px; max-height: 200px; display: block; margin-bottom: 10px;">
                <img *ngIf="fotoPreview" [src]="fotoPreview" alt="Previsualización de la nueva foto" style="max-width: 200px; max-height: 200px; display: block; margin-bottom: 10px;">
                <p-fileUpload 
                    mode="basic" 
                    chooseLabel="Seleccionar Foto" 
                    name="photo" 
                    accept="image/*" 
                    [maxFileSize]="1000000"
                    (onSelect)="onFileSelected($event)"
                    [auto]="false"
                    [customUpload]="true">
                </p-fileUpload>
            </div>
            <button pButton type="submit" label="Actualizar Perfil" [disabled]="!perfilForm.valid"></button>
        </form>
    </div>
</div>

<p-toast></p-toast>
